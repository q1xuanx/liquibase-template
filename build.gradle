plugins {
	id 'java-library'
	id 'org.liquibase.gradle' version '2.2.0'
}
repositories {
	mavenCentral()
}
dependencies {
	liquibaseRuntime 'org.liquibase:liquibase-core:4.18.0'
	liquibaseRuntime 'org.liquibase:liquibase-groovy-dsl:3.0.0'
	liquibaseRuntime 'mysql:mysql-connector-java:8.0.33'
	liquibaseRuntime 'info.picocli:picocli:4.6.1'
}
def changeLog = "src/main/resources/db/changelog/db.changelog-master.yml"

liquibase {
	activities {
		dev {
			changeLogFile changeLog
			url 'jdbc:mysql://localhost:3306/user_name_storage?createDatabaseIfNotExist=true'
			username 'root'
			password 'root'
			classpath "$projectDir"
		}
		runList = project.ext.has('env') ? project.ext.env : 'dev'
	}
}
jar {
	duplicatesStrategy = DuplicatesStrategy.EXCLUDE
}